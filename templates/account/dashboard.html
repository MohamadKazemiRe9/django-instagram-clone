{% load static %}
{% include "base.html" %}


{% block style %}
    <link rel="stylesheet" href="{% static 'css/dashboard.css' %}">
{% endblock style %}
    

{% block content %}
<header>

    <div class="container">

        
        {% if messages %}
                {% for message in messages %}
                      {% if message.tags %}
                        {% if message.tags == "success" %}
                            <script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>
                            <script>
                                Swal.fire(
                                '{{message}}',
                                "",
                                '{{message.tags}}'
                                )
                            </script>
                        {% endif %}
                      {% endif %}
                {% endfor %}
        {% endif %}
            

        <div class="profile">

            <div class="profile-image">

                <img src="{{user.photo.url}}" width="200px" height="200px" alt="">

            </div>

            <div class="profile-user-settings">

                <h1 class="profile-user-name">{{user}}</h1>

                
                {% if request.user == user %}
                    <a href="{% url 'user:edit' %}" class="btn profile-edit-btn">Edit Profile</a>
                {% endif %}

                <button class="btn profile-settings-btn" aria-label="profile settings"><i class="fas fa-cog" aria-hidden="true"></i></button>

            </div>

            <div class="profile-stats">

                <ul>
                    <li><span class="profile-stat-count">{{user.user_posts.all|length}}</span> posts</li>
                    <li><span class="profile-stat-count">188</span> followers</li>
                    <li><span class="profile-stat-count">206</span> following</li>
                </ul>

            </div>

            <div class="profile-bio">

                <p><span class="profile-real-name">{{user.first_name}} {{user.last_name}}</span> 
                    {{user.bio}}
                </p>

            </div>

        </div>
        <!-- End of profile section -->

    </div>
    <!-- End of container -->

</header>

<main>

    <div class="container">

        <div class="gallery">

            {% for post in user.user_posts.all %}
              
            <div class="gallery-item" tabindex="0">

                <img src="{{post.image.url}}" class="gallery-image" alt="">

                <div class="gallery-item-info">

                    <ul>
                        <li class="gallery-item-likes"><span class="visually-hidden">Likes:</span><i class="fas fa-heart" aria-hidden="true"></i> {{post.user_like.all|length}}</li>
                        <li class="gallery-item-comments"><span class="visually-hidden">Comments:</span><i class="fas fa-comment" aria-hidden="true"></i> 2</li>
                    </ul>

                </div>

            </div>
            {% endfor %}

        </div>
        <!-- End of gallery -->

        <div class="loader"></div>

    </div>
    <!-- End of container -->

</main>

<!-- scripts -->

{% endblock content %}
    